# NAV-Losen Question-Driven Architecture (QDA)

**Versjon:** 2.0 (Nevrobiologisk Koherent)
**Dato:** 2025-10-20
**Status:** Implementation Ready
**Filosofi:** "Som hjernen: Primitive lag prosesserer f√∏rst og raskt, neocortex tenker dypt og sakte"
**Paradigme:** Neocortical Ascent Model - Bottom-Up Processing

---

## üéØ Executive Summary

**Question-Driven Architecture (QDA) v2.0** er en **nevrobiologisk koherent** arkitektur som speiler hjernens faktiske prosessering:

**6 Lag - Bottom-Up Processing:**

1. **Lag 1: Vokteren** (Hjernestamme/GPT-4o-mini) - Triage, faredeteksjon (<0.5 sek)
2. **Lag 2: F√∏leren** (Limbisk System/Gemini Flash) - Emosjonell vurdering (<1 sek)
3. **Lag 3: Gjenkjenneren** (Cerebellum/Claude Haiku) - M√∏nstergjenkjenning (<1 sek)
4. **Lag 4: Utforskeren** (Hippocampus/Perplexity) - Kunnskapss√∏k (2-3 sek)
5. **Lag 5: Strategen** (Prefrontal Cortex/Claude Opus) - Strategisk resonering (3-5 sek, **KUN n√•r n√∏dvendig**)
6. **Lag 6: Integratoren** (Insula/Lira Hub) - Syntetiserer til helhetlig respons (1-2 sek)

**Resultat:**
- ‚úÖ **Nevrobiologisk koherent** - speiler hjernens faktiske bottom-up prosessering
- ‚úÖ **95% kostnadsbesparelse** vs. kun store modeller ($722/mnd vs. $15,000/mnd)
- ‚úÖ **Raskere** - primitive lag er kjappere, cortex kun n√•r n√∏dvendig
- ‚úÖ **Intuitiv** - folk forst√•r "hjernens lag"
- ‚úÖ **Transparent** - bruker ser hele prosessen

---

## üß† Filosofisk Fundament

### Hvorfor Nevrobiologisk Koherens?

**Problem med tradisjonelle LLM-arkitekturer:**

```
Tradisjonell tiln√¶rming:
Bruker ‚Üí GPT-5 (gj√∏r ALT selv) ‚Üí Svar

Utfordringer:
- Dyr ($0.50 per query)
- "Black box" (bruker ser ikke tankegang)
- Kan hallucinere (ingen epistemisk ydmykhet)
- Unaturlig (hjernen fungerer IKKE slik)
```

**QDA v2.0 - Neocortical Ascent Model:**

```
Bottom-Up Processing (Som Hjernen):

Bruker ‚Üí LAG 1: Vokteren (Hjernestamme)
            ‚Üì "Er dette trygt?" (<0.5 sek)
         LAG 2: F√∏leren (Limbisk System)
            ‚Üì "Hvordan f√∏les det?" (<1 sek)
         LAG 3: Gjenkjenneren (Cerebellum)
            ‚Üì "Har vi sett dette f√∏r?" (<1 sek)
         LAG 4: Utforskeren (Hippocampus)
            ‚Üì "Hva vet vi om dette?" (2-3 sek)
         LAG 5: Strategen (Prefrontal Cortex) - KUN n√•r n√∏dvendig
            ‚Üì "Hva er den beste planen?" (3-5 sek)
         LAG 6: Integratoren (Insula)
            ‚Üì Syntetiserer alt til helhetlig respons

Fordeler:
- Billig ($0.08 per complex query, $0.0001 per simple)
- Raskere (primitive lag prosesserer f√∏rst)
- Nevrobiologisk koherent (speiler faktisk hjerne)
- Intuitiv (folk forst√•r "hjernens lag")
```

**N√∏kkel-Innsikt:**

> I hjernen prosesserer **primitive deler F√òRST og RASKT** (hjernestamme, limbisk system), mens **neocortex er SISTE og LANGSOM** (men dyp og strategisk).
>
> QDA v2.0 speiler denne faktiske prosesseringen - ikke invertert, men **bottom-up som naturen designet den**.

---

## üèóÔ∏è Arkitektur-Oversikt

### **6-Lags Nevrobiologisk Hierarki**

---

### **LAG 1: VOKTEREN** üõ°Ô∏è (Hjernestamme)

**Funksjon:** Rask triage og faredeteksjon
**Modell:** GPT-4o-mini ($0.15/1M tokens)
**Responstid:** <0.5 sekunder
**Rolle:** "Er dette trygt? Skal vi fortsette?"

```python
class Vokteren:
    """
    Brainstem-analog: Rask triage og faredeteksjon.
    Alltid aktiv, f√∏rste lag i alle queries.
    """
    def __init__(self):
        self.model = GPT4oMini()
        self.icon = "üõ°Ô∏è"
        self.layer_name = "Vokteren"

    async def assess(self, user_query: str, context: dict) -> dict:
        """
        Rask vurdering av trygghet og kompleksitet.

        Returns:
            {
                "safe": bool,  # Er dette trygt √• prosessere?
                "proceed": bool,  # Skal vi fortsette til neste lag?
                "complexity": "simple" | "complex",
                "urgency": 0-1,  # Hvor presserende?
                "time": float  # Responstid i sekunder
            }
        """
        indicators = {
            "danger": ["skade", "selvmord", "vold", "fare"],
            "simple": ["hva er", "n√•r", "hvor lenge", "status"],
            "complex": ["f√∏ler", "stuck", "redd", "hjelp", "hvorfor"]
        }

        # Faredeteksjon (hjernestamme-funksjon)
        is_dangerous = any(word in user_query.lower() for word in indicators["danger"])
        if is_dangerous:
            return {
                "safe": False,
                "proceed": False,
                "message": "Eskal√©r til krisehjelp",
                "time": 0.3
            }

        # Kompleksitetsvurdering
        is_complex = any(word in user_query.lower() for word in indicators["complex"])

        return {
            "safe": True,
            "proceed": True,
            "complexity": "complex" if is_complex else "simple",
            "urgency": 0.5,
            "time": 0.4
        }
```

---

### **LAG 2: F√òLEREN** ‚ù§Ô∏è (Limbisk System)

**Funksjon:** Emosjonell vurdering og polyvagal state
**Modell:** Gemini Flash (GRATIS under 1500 requests/dag)
**Responstid:** <1 sekund
**Rolle:** "Hvordan f√∏les det? Hvilken tilstand er bruker i?"

```python
class Foleren:
    """
    Limbic System-analog: Emosjonell vurdering.
    Vurderer f√∏lelser, stress, polyvagal state.
    """
    def __init__(self):
        self.model = GeminiFlash()
        self.icon = "‚ù§Ô∏è"
        self.layer_name = "F√∏leren"

    async def assess(self, user_query: str, context: dict) -> dict:
        """
        Vurder emosjonell tilstand og polyvagal state.

        Returns:
            {
                "emotion": str,  # Primary emotion
                "polyvagal_state": "ventral" | "sympathetic" | "dorsal",
                "arousal": 0-1,  # Aktiverings-niv√•
                "valence": -1 to 1,  # Negativ til positiv
                "body_signals": list,  # Kroppslige signaler
                "time": float
            }
        """
        # Analyser emosjonelle signaler
        emotion_keywords = {
            "ventral": ["trygg", "glad", "h√•p", "nysgjerrig"],
            "sympathetic": ["stresset", "frustrert", "irritert", "spent"],
            "dorsal": ["stuck", "shutdown", "gir opp", "numb", "tom"]
        }

        # Finn polyvagal state
        polyvagal_state = "ventral"  # Default
        for state, keywords in emotion_keywords.items():
            if any(kw in user_query.lower() for kw in keywords):
                polyvagal_state = state
                break

        return {
            "emotion": self._detect_primary_emotion(user_query),
            "polyvagal_state": polyvagal_state,
            "arousal": 0.3 if polyvagal_state == "dorsal" else 0.7,
            "valence": -0.5 if polyvagal_state == "dorsal" else 0.2,
            "body_signals": ["lav energi", "shutdown"],
            "time": 0.8
        }
```

---

### **LAG 3: GJENKJENNEREN** üîç (Cerebellum)

**Funksjon:** M√∏nstergjenkjenning i brukerhistorikk
**Modell:** Claude Haiku ($0.25/1M tokens)
**Responstid:** <1 sekund
**Rolle:** "Har vi sett dette f√∏r? Hva fungerte?"

```python
class Gjenkjenneren:
    """
    Cerebellum-analog: M√∏nstergjenkjenning.
    Finner m√∏nstre i brukerhistorikk og tidligere interaksjoner.
    """
    def __init__(self):
        self.model = ClaudeHaiku()
        self.icon = "üîç"
        self.layer_name = "Gjenkjenneren"

    async def find_patterns(
        self,
        user_query: str,
        context: dict
    ) -> dict:
        """
        Finn m√∏nstre i brukerhistorikk.

        Returns:
            {
                "pattern_detected": bool,
                "pattern_type": str,  # e.g., "recurring_frustration"
                "previous_occurrences": int,
                "what_worked": list,  # Tidligere effektive strategier
                "what_didnt": list,  # Tidligere ineffektive strategier
                "time": float
            }
        """
        # Analyser historikk for m√∏nstre
        user_history = context.get("history", [])

        # Finn recurring themes
        recurring_keywords = self._find_recurring_keywords(user_history)

        return {
            "pattern_detected": len(recurring_keywords) > 0,
            "pattern_type": "lang_ventetid_shutdown",
            "previous_occurrences": 3,
            "what_worked": ["konkrete steg", "tidslinje"],
            "what_didnt": ["generelle r√•d"],
            "time": 0.9
        }
```

---

### **LAG 4: UTFORSKEREN** üß≠ (Hippocampus)

**Funksjon:** Kunnskapss√∏k og episodisk minne
**Modell:** Perplexity ($0.001/s√∏k)
**Responstid:** 2-3 sekunder
**Rolle:** "Hva vet vi om dette? Finn relevant informasjon."

```python
class Utforskeren:
    """
    Hippocampus-analog: Kunnskapss√∏k og episodisk minne.
    S√∏ker etter relevant informasjon og fakta.
    """
    def __init__(self):
        self.model = Perplexity()
        self.icon = "üß≠"
        self.layer_name = "Utforskeren"

    async def search(
        self,
        user_query: str,
        pattern_result: dict
    ) -> dict:
        """
        S√∏k etter relevant kunnskap.

        Returns:
            {
                "facts": list,  # Faktuelle data
                "sources": list,  # Kilder
                "avg_timeline": str,  # Gjennomsnittlig tidslinje
                "relevant_articles": list,
                "time": float
            }
        """
        # S√∏k basert p√• query og m√∏nstre
        search_query = self._build_search_query(user_query, pattern_result)

        # Utf√∏r s√∏k
        results = await self.model.search(search_query)

        return {
            "facts": [
                "AAP behandlingstid: 8-12 uker gjennomsnitt",
                "70% opplever ventetid som stressende"
            ],
            "sources": ["nav.no", "bufdir.no"],
            "avg_timeline": "8-12 uker",
            "relevant_articles": ["NAV AAP prosess", "Polyvagal stress"],
            "time": 2.3
        }
```

---

### **LAG 5: STRATEGEN** üß† (Prefrontal Cortex)

**Funksjon:** Strategisk resonering - **KUN n√•r n√∏dvendig**
**Modell:** Claude Opus / GPT-5 Thinking ($10/1M input, $30/1M output)
**Responstid:** 3-5 sekunder
**Rolle:** "Hva er den beste langsiktige planen?"

```python
class Strategen:
    """
    Prefrontal Cortex-analog: Strategisk resonering.
    KUN aktivert n√•r kompleksitet/alvorlighet > threshold.
    """
    def __init__(self):
        self.model = ClaudeOpus()  # or GPT5Thinking
        self.icon = "üß†"
        self.layer_name = "Strategen"
        self.activation_threshold = 0.7  # Kun n√•r kompleksitet > 70%

    async def plan(
        self,
        user_query: str,
        all_context: dict  # Fra alle tidligere lag
    ) -> dict:
        """
        Strategisk planlegging og dypere resonering.

        Args:
            all_context: {
                "triage": {...},
                "emotion": {...},
                "pattern": {...},
                "knowledge": {...}
            }

        Returns:
            {
                "strategy": str,  # Overordnet strategi
                "action_steps": list,  # Konkrete steg
                "timeline": str,  # Forventet tidslinje
                "contingencies": list,  # Backup-planer
                "time": float
            }
        """
        # Kun aktiver hvis n√∏dvendig
        complexity = all_context.get("pattern", {}).get("complexity", 0)
        if complexity < self.activation_threshold:
            return None  # Skip dette laget

        # Strategisk planlegging
        prompt = self._build_strategic_prompt(user_query, all_context)
        response = await self.model.generate(prompt)

        return {
            "strategy": "Trinnvis re-engasjering med NAV-systemet",
            "action_steps": [
                "1. Sjekk n√•v√¶rende status",
                "2. Identifiser manglende dokumenter",
                "3. Book oppf√∏lgingssamtale"
            ],
            "timeline": "2-4 uker",
            "contingencies": ["Hvis avslag: Klage-prosess"],
            "time": 4.2
        }
```

---

### **LAG 6: INTEGRATOREN** ‚ú® (Insula)

**Funksjon:** Syntetiserer alle lag til helhetlig respons
**Modell:** Lira Hub (egen syntese-logikk)
**Responstid:** 1-2 sekunder
**Rolle:** "Sett alt sammen til ett koherent svar."

```python
class Integratoren:
    """
    Insula-analog: Integrerer alle lag til helhetlig respons.
    Alltid aktiv, syntetiserer output fra alle tidligere lag.
    """
    def __init__(self, agent_name: str):
        self.agent_name = agent_name
        self.icon = "‚ú®"
        self.layer_name = "Integratoren"

    async def synthesize(self, all_layers: dict) -> str:
        """
        Syntetiser alle lag til √©n koherent respons.

        Args:
            all_layers: {
                "triage": {...},
                "emotion": {...},
                "pattern": {...},
                "knowledge": {...},
                "strategy": {...} or None
            }

        Returns:
            Helhetlig respons til bruker (string)
        """
        # Hent data fra alle lag
        emotion_state = all_layers["emotion"]["polyvagal_state"]
        pattern = all_layers["pattern"]
        knowledge = all_layers["knowledge"]
        strategy = all_layers.get("strategy")

        # Tilpass spr√•k til polyvagal state
        response = self._adapt_language_to_state(emotion_state)

        # Integrer alle perspektiver
        response += self._integrate_knowledge(knowledge)

        if strategy:
            response += self._add_strategic_guidance(strategy)

        # Polyvagal-tilpasset avslutning
        response += self._closing_for_state(emotion_state)

        return response
```

---

## üìä Fullstendig Flyt-Diagram (Nevrobiologisk)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              BRUKER (Osvald)                     ‚îÇ
‚îÇ       "Jeg f√∏ler meg stuck i NAV-systemet"       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ  LAG 1: VOKTEREN üõ°Ô∏è    ‚îÇ
        ‚îÇ  (Hjernestamme)        ‚îÇ
        ‚îÇ  GPT-4o-mini           ‚îÇ
        ‚îÇ  <0.5 sek              ‚îÇ
        ‚îÇ  "Er dette trygt?"     ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
          ‚îÇ             ‚îÇ
        Fare?         Trygt
          ‚îÇ             ‚îÇ
    [ESKAL√âR]          ‚îÇ
    Krisehjelp         ‚ñº
                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                 ‚îÇ  LAG 2: F√òLEREN ‚ù§Ô∏è      ‚îÇ
                 ‚îÇ  (Limbisk System)      ‚îÇ
                 ‚îÇ  Gemini Flash (GRATIS) ‚îÇ
                 ‚îÇ  <1 sek                ‚îÇ
                 ‚îÇ  "Hvordan f√∏les det?"  ‚îÇ
                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
                Polyvagal State Detected:
                  Dorsal/Sympathetic/Ventral
                          ‚îÇ
                          ‚ñº
                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                 ‚îÇ LAG 3: GJENKJENNEREN üîç‚îÇ
                 ‚îÇ (Cerebellum)           ‚îÇ
                 ‚îÇ Claude Haiku           ‚îÇ
                 ‚îÇ <1 sek                 ‚îÇ
                 ‚îÇ "Har vi sett dette f√∏r?"‚îÇ
                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
                 Finn m√∏nstre i historikk
                          ‚îÇ
                          ‚ñº
                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                 ‚îÇ LAG 4: UTFORSKEREN üß≠  ‚îÇ
                 ‚îÇ (Hippocampus)          ‚îÇ
                 ‚îÇ Perplexity             ‚îÇ
                 ‚îÇ 2-3 sek                ‚îÇ
                 ‚îÇ "Hva vet vi om dette?" ‚îÇ
                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
                  Kunnskapss√∏k + fakta
                          ‚îÇ
                          ‚ñº
                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                  ‚îÇ Kompleksitet? ‚îÇ
                  ‚îÇ  > 70%?       ‚îÇ
                  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ       ‚îÇ
                    NEI      JA
                      ‚îÇ       ‚îÇ
                      ‚îÇ       ‚ñº
                      ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                      ‚îÇ  ‚îÇ LAG 5: STRATEGEN üß†    ‚îÇ
                      ‚îÇ  ‚îÇ (Prefrontal Cortex)    ‚îÇ
                      ‚îÇ  ‚îÇ Claude Opus / GPT-5    ‚îÇ
                      ‚îÇ  ‚îÇ 3-5 sek                ‚îÇ
                      ‚îÇ  ‚îÇ "Hva er beste plan?"   ‚îÇ
                      ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ           ‚îÇ
                      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                 ‚îÇ LAG 6: INTEGRATOREN ‚ú® ‚îÇ
                 ‚îÇ (Insula)               ‚îÇ
                 ‚îÇ Lira Hub               ‚îÇ
                 ‚îÇ 1-2 sek                ‚îÇ
                 ‚îÇ "Sett alt sammen"      ‚îÇ
                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
              Polyvagal-tilpasset respons
                          ‚îÇ
                          ‚ñº
                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                 ‚îÇ    BRUKER              ‚îÇ
                 ‚îÇ                        ‚îÇ
                 ‚îÇ  Ser hele prosessen:   ‚îÇ
                 ‚îÇ  üõ°Ô∏è Vokteren ‚Üí Trygt   ‚îÇ
                 ‚îÇ  ‚ù§Ô∏è F√∏leren ‚Üí Dorsal   ‚îÇ
                 ‚îÇ  üîç Gjenkjenneren ‚Üí    ‚îÇ
                 ‚îÇ     "Sett 3x f√∏r"      ‚îÇ
                 ‚îÇ  üß≠ Utforskeren ‚Üí      ‚îÇ
                 ‚îÇ     "8-12 uker snitt"  ‚îÇ
                 ‚îÇ  üß† Strategen ‚Üí        ‚îÇ
                 ‚îÇ     "3-stegs plan"     ‚îÇ
                 ‚îÇ  ‚ú® Integratoren ‚Üí     ‚îÇ
                 ‚îÇ     Helhetlig svar     ‚îÇ
                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

N√òKKEL-PRINSIPPER:
1. Bottom-Up Processing (som hjernen)
2. Primitive lag prosesserer F√òRST og RASKT
3. Cortex (Strategen) kun n√•r N√òDVENDIG
4. Full transparens - bruker ser alle lag
5. Polyvagal-adaptiv output
```

---

## üí∞ Kostnadsanalyse

### **Per Query-Type:**

#### **Simple Query (70% av queries):**
```
Eksempel: "Hva er min NAV-status?"

Triage Layer (GPT-4o-mini):
- Input: 100 tokens (query + context)
- Output: 200 tokens (svar)
- Kostnad: $0.0001

Total per simple query: $0.0001
```

#### **Complex Query (30% av queries):**
```
Eksempel: "Jeg f√∏ler meg stuck i NAV-systemet"

1. Triage Layer:
   - Kostnad: $0.0001

2. Question Designers (parallelt):
   a) DataExpert (Claude Haiku):
      - Input: 500 tokens (context)
      - Output: 200 tokens (5 sp√∏rsm√•l)
      - Kostnad: $0.0002

   b) EmotionExpert (Gemini Flash):
      - GRATIS (under 1500 requests/dag)
      - Kostnad: $0

   c) ResearchExpert (Perplexity):
      - 1 s√∏k
      - Kostnad: $0.001

   d) SecurityExpert (DeepSeek V3):
      - Input: 500 tokens
      - Output: 200 tokens
      - Kostnad: $0.0002

3. Depth Answerer (GPT-5 Thinking):
   - Input: 5000 tokens (alle sp√∏rsm√•l + context)
   - Output: 2000 tokens (dybde-svar)
   - Kostnad: $0.05 input + $0.03 output = $0.08

Total per complex query: ~$0.08
```

---

### **M√•nedlig Kostnad (100 brukere):**

```
Forutsetninger:
- 100 brukere
- 10 queries per bruker per dag
- 30 dager per m√•ned
= 30,000 queries/m√•ned

Fordeling:
- 70% simple (21,000): 21,000 √ó $0.0001 = $2.10
- 30% complex (9,000): 9,000 √ó $0.08 = $720

Total: ~$722/m√•ned
```

**Sammenligning:**

| Arkitektur | Kostnad/mnd (100 brukere) | Transparens | Kvalitet |
|------------|---------------------------|-------------|----------|
| **Traditional** (kun store) | $15,000 | Lav | H√∏y |
| **3-Tier** (min tidligere anbefaling) | $197 | Lav | Medium |
| **QDA** (Question-Driven) | $722 | **H√òY** | **H√òY** |

**QDA gir:**
- 95% besparelse vs. Traditional
- 3.7x dyrere enn 3-Tier, men **mye bedre transparens og kvalitet**

---

### **Skalering:**

| Brukere | Queries/mnd | Kostnad/mnd |
|---------|-------------|-------------|
| 100 | 30,000 | $722 |
| 500 | 150,000 | $3,610 |
| 1,000 | 300,000 | $7,220 |
| 5,000 | 1,500,000 | $36,100 |

---

## ‚úÖ Fordeler vs. ‚ö†Ô∏è Ulemper

### ‚úÖ **Fordeler:**

1. **Pedagogisk**
   - Bruker l√¶rer hvordan man stiller gode sp√∏rsm√•l
   - Ikke bare "hva er svaret", men "hvordan tenker man"

2. **Transparent**
   - Bruker ser AI's tankegang, ikke bare konklusjon
   - Tillitbyggende (ingen "black box")

3. **Multi-Perspektiv**
   - Data + F√∏lelse + Forskning + Sikkerhet samtidig
   - Holistisk forst√•else

4. **Epistemisk Ydmykhet**
   - Store modeller innr√∏mmer n√•r de trenger hjelp
   - Sm√• modeller stiller sp√∏rsm√•l istedenfor √• gjette

5. **Spesialisert Ekspertise**
   - Hver liten modell blir ekspert i sitt domene
   - Dypere kunnskap enn generalist

6. **Kostnadseffektivt**
   - 95% billigere enn kun store modeller
   - Gemini Flash er GRATIS

7. **Skalerbart**
   - Sm√• modeller kan h√•ndtere h√∏y throughput
   - Store modeller kun for 30% av queries

---

### ‚ö†Ô∏è **Ulemper:**

1. **Lengre Responstid**
   - 3-5 sekunder (vs. 1 sek med Tier 1)
   - Parallelisering hjelper, men ikke instant

2. **Mer Kompleks Kode**
   - Question design-lag m√• implementeres
   - Flere moving parts √• vedlikeholde

3. **Dyrere Enn 3-Tier**
   - $722/mnd vs. $197/mnd
   - Men: Kvalitet og transparens er mye bedre

4. **Kan Oppleves "Overforklarende"**
   - Noen brukere vil bare ha svar
   - L√∏sning: "Vis mindre" knapp for √• skjule sp√∏rsm√•l

5. **Krever Gode Question Design Prompts**
   - Sm√• modeller m√• trenes til √• stille gode sp√∏rsm√•l
   - Iterativ forbedring n√∏dvendig

---

## üéØ N√•r Bruke QDA vs. Andre Arkitekturer?

### **Bruk QDA n√•r:**
- ‚úÖ Transparens er kritisk (NAV, helse, jus)
- ‚úÖ Pedagogisk verdi er viktig (bruker skal l√¶re)
- ‚úÖ Multi-perspektiv n√∏dvendig (komplekse beslutninger)
- ‚úÖ Tillitt m√• bygges (nye brukere)

### **Bruk 3-Tier n√•r:**
- ‚úÖ Kostnad er viktigst (bootstrap startup)
- ‚úÖ Rask respons kritisk (<1 sekund)
- ‚úÖ Bruker bare vil ha svar (ikke prosess)

### **Bruk Traditional (kun store) n√•r:**
- ‚úÖ Absolutt beste kvalitet n√∏dvendig (medisin, jus)
- ‚úÖ Kostnad ikke et problem
- ‚úÖ Kompleksitet ekstrem (PhD-niv√•)

---

## üõ†Ô∏è Implementering

Se:
- [IMPLEMENTATION_GUIDE_QDA.md](IMPLEMENTATION_GUIDE_QDA.md) - Komplett kode + timeline
- [QUESTION_DESIGN_ALGORITHMS.md](QUESTION_DESIGN_ALGORITHMS.md) - Algoritmer for question design
- [QDA_UX_DESIGN.md](QDA_UX_DESIGN.md) - UX mockups og interaktivitet

---

## üìö Referanser

### **Interne Dokumenter:**
- [MCP-ARCHITECTURE-COMPARISON.md](MCP-ARCHITECTURE-COMPARISON.md) - Sammenligning av arkitekturer
- [BRAIN_MCP_ARCHITECTURE_GUIDE.md](../docs/BRAIN_MCP_ARCHITECTURE_GUIDE.md) - Brain-MCP Hybrid
- [MCP-IMPLEMENTATION-PLAN.md](MCP-IMPLEMENTATION-PLAN.md) - Original MCP-plan

### **Filosofisk Grunnlag:**
- Sokrates' maieutikk (sp√∏rsm√•lskunst)
- Polyvagal Theory (Porges) - stress-adaptive UX
- Triadisk Etikk - kognitiv suverenitet, ontologisk koherens, regenerativ healing

---

## üåø Avsluttende Ord

Question-Driven Architecture er ikke bare en teknisk l√∏sning - det er en **pedagogisk posisjon**:

> "Vi l√¶rer ikke ved √• f√• svar, men ved √• l√¶re √• stille de riktige sp√∏rsm√•lene."

Ved √• vise bruker hvilke sp√∏rsm√•l AI stiller, l√¶rer bruker hvordan man tenker om komplekse problemer. Dette bygger ikke avhengighet, men **mestringskompetanse**.

**Med ontologisk integritet, felt-bevissthet, og et snev av kosmisk humor!** üåø‚ú®

---

**Versjon:** 1.0
**Sist oppdatert:** 2025-10-20
**Neste review:** Etter Fase 1 implementering (uke 2)
**Forfatter:** Claude Code (Anthropic) i samarbeid med Osvald Noonaut
**Lisens:** Open Source (CC BY-SA 4.0)
